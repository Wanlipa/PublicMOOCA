<%- include('includes/head.ejs') %>

    </head>


    <body>
        <%- include('includes/navigation.ejs') %>
            <br>
            <div class="container">
                <h3>Learners Clustering</h3>
                <div id="learner"></div>
                <!-- Table Learners -->
                <table class="table table-hover">
                        <thead style="text-align: center" class=" bg-info text-light">
                            <tr>
                                <th scope="col">Cluster</th>
                                <th scope="col">Description</th>
                                <th scope="col">Number of Learners</th>
                                <th scope="col">Learners Percentage</th>
                            </tr>
                        </thead>
                        <tbody style="text-align: center">
                            <tr>
                                <th scope="row">C_E1</th>
                                <td>Sampling Learners</td>
                                <td>8558</td>
                                <td>70%</td>
                            </tr>
                            <tr>
                                <th scope="row">C_E2</th>
                                <td>Targeting Learners</td>
                                <td>833</td>
                                <td>7%</td>
                            </tr>
                            <tr>
                                <th scope="row">C_E3</th>
                                <td>Comprehensive Learners</td>
                                <td>2707</td>
                                <td>23%</td>
                            </tr>
                        </tbody>
                    </table>

            </div>
            <script>

                // Get data from csv
                Plotly.d3.csv("data/LearnerClustering.csv", function (err, rows) {

                    function unpack(rows, key) {
                        return rows.map(function (row) { return row[key]; });
                    }
                    // Learners Clustering
                    var data = [{
                        type: 'scatter',
                        mode: 'markers',
                        x: unpack(rows, 'Grade'),
                        y: unpack(rows, 'Attempt'),
                        text: unpack(rows, 'learner cluster'),
                        marker: {
                            size: 8,
                            sizemode: "area"
                        },
                        transforms: [
                            {
                                type: 'groupby',
                                groups: unpack(rows, 'learner cluster'),
                                styles: [
                                    { target: '0', value: { marker: { color: 'red' ,symbol: 'circle'},name: 'Sampling Learners' } },
                                    { target: '1', value: { marker: { color: 'green' ,symbol: 'square'},name: 'Comprehensive Learners' } },
                                    { target: '2', value: { marker: { color: 'blue' ,symbol: 'triangle-up'},name: 'Targeting Learners' } }
                                ]
                            }]
                    }]

                    var layout = {
                        yaxis: {
                            type: 'log',
                            title: 'Attempt'
                        },
                        xaxis: {
                            title: 'Grade'
                        }
                    }
                    
                    // Plot Graph
                    Plotly.plot('learner', data, layout)

                });




               

            </script>
            <%- include('includes/end.ejs') %>